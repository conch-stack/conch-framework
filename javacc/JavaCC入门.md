## JavaCC入门

https://blog.csdn.net/qq_15089775/article/details/122270655

### JJ语法

##### options

主要功能是javacc在读取*.jj语法文件生成java程序时，配置生成参数

```java
//可选配置参数
options{
     STATIC = false; //关闭生成java方法是静态的，默认是true
     DEBUG_PARSER = true;//开启调试解析打印,默认是false
     JDK_VERSION = "1.8";//生产java时使用jdk版本,默认1.5
     UNICODE_INPUT=true;//接收unicode编码的输入，默认是false
}
```



##### 解析类声明

固定格式

```java
PARSER_BEGIN(类名)
 
pakage 包名 //生成java文件采用此包名
 
import ....
public class 类 {
      ......
}
 
PARSER_END(类名)
```



##### 词法定义

符号“|”是或者的含义，匹配规则类似正则表达式。javacc的词法类型有SKIP、TOKEN 、MORE、SPECIAL_TOKEN。词法定义是语法解析的基础，好的词法定义可以让语法解析时很容易处理到达事半功倍的效果：

```java
TOKEN : {
  <定义词1 ：匹配规则1
          | 匹配规则n>
 | <定义词2 : 匹配规则>
.....
}
```



##### 语法定义和动作执行

```
返回类型 语法规则名(参数) 异常抛出声明 : 
{变量声明}
{
  //语法规则
   定义词的组合规则
  {匹配规则时的执行动作，即使java代码执行;}
}
```

语法定义的格式有点像java方法的定义：有返回类型，语法规则名，异常抛出声明 ，变量声明，语法主体及动作执行。

**返回类型**：无返则声明为 void，有返回类型 则要在动作执行中至少一次的 return 返回类型

**语法规则名**：类似java方法，可以无参数，**格式遵守java方法的方式**。

**异常抛出声明** ：可以忽略不写，如果执行动作（java代码执行）中有抛出异常且未处理则要声明抛出的异常。

 **变量声明**：无变量声明可以为空，**但是这一对“{}”是不能省略**。声明的变量为语法主体要使用的，其作用范围仅限在该语法规则中。

**语法主体及动作执行**：语法规则可以说是根据需要千变万化，其实质就是定义的词法的规则组合，其规则组合也类似正则表达式。要写好语法规则，除了要定义好词法外，重要就要理解清楚这个规则的语义，清楚了语义写规则就是信手捏来，那么动作执行就水到渠成。



##### 生成语法（包括词法）解析程序

```java
javacc option-settings xx.jj文件路径
 
//例如
javacc Hello.jj
```

option-settings 就是上文介绍的options中的参数，此选项也是可以省略不写的。作用的优先级是命令设置>jj文件中定义的>默认值
